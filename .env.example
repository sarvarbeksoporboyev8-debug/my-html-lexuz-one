# LexUZ MVP Configuration
# Copy this file to .env and fill in your values

# Storage (Railway provides persistent storage)
DATA_DIR=./data
SQLITE_PATH=./data/lexuz.sqlite3

# LexUZ source
LEX_BASE_URL=https://www.lex.uz
LEX_LANG=uz
LEX_CALENDAR_LANG_PARAM=4

# Crawler settings
POLL_DAYS=2
MAX_DOCS_PER_RUN=15
RECHECK_DAYS=21
RECHECK_PER_RUN=6
HTTP_RATE_LIMIT_SECONDS=0.2
HTTP_TIMEOUT_SECONDS=30

# Chunking
CHUNK_MAX_WORDS=350
CHUNK_OVERLAP_WORDS=60

# Retrieval
TOP_K=15
CANDIDATE_MULTIPLIER=6
MAX_CHUNKS_PER_DOC=5

# Embeddings (local, free)
EMBEDDING_PROVIDER=local
EMBEDDING_MODEL=intfloat/multilingual-e5-small

# Vector index backend
INDEX_BACKEND=auto

# ===========================================
# REQUIRED: OpenRouter API for LLM responses
# ===========================================
# Get your key at https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-your-api-key-here
OPENROUTER_MODEL=google/gemma-2-9b-it
OPENROUTER_BASE_URL=https://openrouter.ai/api
OPENROUTER_SITE_URL=
OPENROUTER_APP_NAME=LexUZ MVP

USE_OPENAI_REWRITE=1

# ===========================================
# OPTIONAL: Telegram notifications
# ===========================================
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ===========================================
# OPTIONAL: Bright Data Proxy (faster crawling)
# ===========================================
# Get credentials at https://brightdata.com/
BRIGHTDATA_ENABLED=0
BRIGHTDATA_HOST=brd.superproxy.io
BRIGHTDATA_PORT=33335
BRIGHTDATA_USERNAME=
BRIGHTDATA_PASSWORD=

# When using Bright Data proxy, robots.txt crawl-delay is ignored
RESPECT_ROBOTS=1

# ===========================================
# OCR Configuration (for scanned PDFs)
# ===========================================
ENABLE_OCR=1
OCR_LANG=uzb+rus+eng
OCR_DPI=300
OCR_MAX_PAGES=50
TESSERACT_CMD=

# ===========================================
# OPTIONAL: Azure AI Document Intelligence
# ===========================================
# Better OCR quality than Tesseract, but costs money
# Leave empty to use free local Tesseract OCR
AZURE_DI_ENDPOINT=
AZURE_DI_KEY=
AZURE_DI_API_VERSION=2024-11-30
AZURE_DI_MODEL=prebuilt-read
AZURE_DI_OUTPUT_FORMAT=text
AZURE_DI_OCR_HIGH_RES=1
AZURE_DI_POLL_TIMEOUT_SECONDS=180
AZURE_DI_POLL_INTERVAL_SECONDS=2.0

# ===========================================
# Search-based Q&A (search_ask.py)
# ===========================================
# Priority: Gemini > Perplexity > Local FTS > DuckDuckGo

# DeepSeek API (cheap LLM for answering)
DEEPSEEK_API_KEY=
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

# Perplexity API (~$0.006/query, good quality)
PERPLEXITY_API_KEY=

# Google Gemini with Search Grounding (~$0.0035/query)
GEMINI_API_KEY=

# Local FTS search (fastest, ~$0.001/query with DeepSeek)
# Build index first: python local_fts_index.py --html-dir ./lex_html --db ./data/lexuz_fts.sqlite3
LEXUZ_LOCAL_FTS_DB=
